"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var GVerify=function(){function e(t){_classCallCheck(this,e),this.options={id:t.id,canvasId:t.canvasId||"verifyCanvas",width:t.width||"75",height:t.height||"20",type:t.type||"blend",length:t.length||4,code:"",numArr:[1,2,3,4,5,6,7,8,9,0]},this.options.letterArr=this.getAllLetter(),this.init(),this.refresh()}return _createClass(e,[{key:"init",value:function(){var t=this,e=document.getElementById(this.options.id),i=document.createElement("canvas");this.options.width=0<e.offsetWidth?e.offsetWidth:this.options.width,this.options.height=0<e.offsetHeight?e.offsetHeight:this.options.height,i.id=this.options.canvasId,i.width=this.options.width,i.height=this.options.height,i.style.cursor="pointer",i.innerHTML="您的浏览器版本不支持canvas",e.appendChild(i),i.onclick=function(){t.refresh()}}},{key:"refresh",value:function(){this.options.code="";var t=document.getElementById(this.options.canvasId);if(t.getContext){var e,i=t.getContext("2d");i.textBaseline="middle",i.fillStyle=this.randomColor(180,240),i.fillRect(0,0,this.options.width,this.options.height),e="blend"==this.options.type?this.options.numArr.concat(this.options.letterArr):"number"==this.options.type?this.options.numArr:this.options.letterArr;for(var o=1;o<=this.options.length;o++){var n=e[this.randomNum(0,e.length)];this.options.code+=n,i.font="20px SimHei",i.fillStyle=this.randomColor(50,160),i.shadowOffsetX=this.randomNum(-3,3),i.shadowOffsetY=this.randomNum(-3,3),i.shadowBlur=this.randomNum(-3,3),i.shadowColor="rgba(0, 0, 0, 0.3)";var s=this.options.width/(this.options.length+1)*o,r=this.options.height/2,h=this.randomNum(-30,30);i.translate(s,r),i.rotate(h*Math.PI/180),i.fillText(n,0,0),i.rotate(-h*Math.PI/180),i.translate(-s,-r)}}}},{key:"validate",value:function(t){return(t=t.toLowerCase())==this.options.code.toLowerCase()}},{key:"getAllLetter",value:function(){return"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(",")}},{key:"randomNum",value:function(t,e){return Math.floor(Math.random()*(e-t)+t)}},{key:"randomColor",value:function(t,e){return"rgb("+this.randomNum(t,e)+","+this.randomNum(t,e)+","+this.randomNum(t,e)+")"}}]),e}();