"use strict";function ajax(t){if(!t.url)throw new Error("url的参数时必填的");var e={type:"get",async:!0};for(var r in t)e[r]=t[r];if("get"!=e.type&&"post"!=e.type)throw new Error("type参数只能为get 或者 post");if("[object Boolean]"!=Object.prototype.toString.call(e.async))throw new Error("async的值只能为布尔值");if(e.data){var a=Object.prototype.toString.call(e.data);if("[object String]"!=a&&"[object Object]"!=a)throw new Error("data的格式只能为key=value&key=value 或者 {key:value}");if("[object Object]"==a){var o="";for(var n in e.data)o+=n+"="+e.data[n]+"&";e.data=o.substr(0,o.length-1)}if("[object String]"==a&&!e.data.includes("="))throw new Error("data格式只能为key=value")}if(!e.success)throw new Error("success是必须存在的参数");if("[object Function]"!=Object.prototype.toString.call(e.success))throw new Error("success必须是函数");try{var c=new XMLHttpRequest;"get"==e.type?(c.open(e.type,e.url+(e.data?"?"+e.data:""),e.async),c.send()):"post"==e.type&&(c.open(e.type,e.url,e.async),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(e.data)),e.async?c.onload=function(){e.success(c.responseText)}:e.success(JSON.parse(c.responseText))}catch(t){e.error(t)}}function pAjax(t){return new Promise(function(e,r){ajax({url:t.url,data:t.data,type:t.type||"get",async:t.async||!0,success:function(t){e(t)},error:function(t){r(t)}})})}